# OpenZiti Edge Router Configuration Override
# This file provides custom configuration for the edge router
# It will be merged with the default configuration generated by the quickstart

# Custom certificate configuration
identity:
  cert: /persistent/pki/custom/certs/server-cert.pem
  server_cert: /persistent/pki/custom/certs/server-cert.pem
  key: /persistent/pki/custom/keys/server-key.pem
  ca: /persistent/pki/custom/ca/ca-chain.pem

# Edge listener configuration
listeners:
  - binding: edge
    address: tls:0.0.0.0:3022
    options:
      advertise: "${ZITI_ROUTER_ADVERTISED_ADDRESS}:${ZITI_ROUTER_PORT}"
      connectTimeoutMs: 5000
      getSessionTimeout: 60s
      # Custom certificates
      identityCert: /persistent/pki/custom/certs/server-cert.pem
      identityKey: /persistent/pki/custom/keys/server-key.pem
      identityCa: /persistent/pki/custom/ca/ca-chain.pem

# Transport configuration  
transport:
  ws:
    writeTimeout: 10
    readTimeout: 5
    idleTimeout: 120

# Forwarder configuration
forwarder:
  # Maximum queue size
  linkDialQueueLength: 1000
  # Maximum concurrent dials
  linkDialWorkerCount: 32

# CSR (Certificate Signing Request) configuration
csr:
  # Router will use its own identity cert, not generate CSR
  sans:
    dns:
      - "${ZITI_ROUTER_ADVERTISED_ADDRESS}"
    ip:
      - "${ZITI_ROUTER_IP_OVERRIDE}"
