# OpenZiti Controller Configuration Override
# This file provides custom configuration for the controller
# It will be merged with the default configuration generated by the quickstart

# Custom certificate configuration
identity:
  cert: /persistent/pki/custom/certs/server-cert.pem
  server_cert: /persistent/pki/custom/certs/server-cert.pem
  key: /persistent/pki/custom/keys/server-key.pem
  ca: /persistent/pki/custom/ca/ca-chain.pem

# Edge configuration
edge:
  api:
    # Use custom certificates for Edge API
    identity:
      cert: /persistent/pki/custom/certs/server-cert.pem
      server_cert: /persistent/pki/custom/certs/server-cert.pem
      key: /persistent/pki/custom/keys/server-key.pem
      ca: /persistent/pki/custom/ca/ca-chain.pem
    
    # Session configuration
    sessionTimeout: 30m
    # Enrollment configuration
    enrollment:
      # Extended enrollment duration (7 days)
      edgeIdentityDuration: 10080m
      edgeRouterDuration: 10080m

# Web configuration
web:
  - name: all-apis-localhost
    bindPoints:
      - interface: 0.0.0.0:1280
        address: 0.0.0.0:1280
    identity:
      ca: /persistent/pki/custom/ca/ca-chain.pem
      key: /persistent/pki/custom/keys/server-key.pem
      server_cert: /persistent/pki/custom/certs/server-cert.pem
      cert: /persistent/pki/custom/certs/server-cert.pem
    options:
      idleTimeout: 5000ms
      readTimeout: 5000ms
      writeTimeout: 100000ms
      minTLSVersion: TLS1.2
      maxTLSVersion: TLS1.3

# Database configuration
db: /persistent/db/ctrl.db

# Network configuration
network:
  # Minimum cost for router links
  minRouterCost: 10
  # Router connection options
  routerConnectChurnLimit: 1m
  # Dialer timeout
  dialerBindIpOverride: ""
